CREATE DATABASE SQL_EXERCISE;
USE SQL_EXERCISE;

CREATE TABLE REGIONS(
REGION_ID INTEGER NOT NULL, 
REGION_NAME VARCHAR(25),
PRIMARY KEY(REGION_ID)
);

CREATE TABLE COUNTRIES(
COUNTRY_ID CHAR(2),
COUNTRY_NAME VARCHAR(40),
REGION_ID INTEGER,
PRIMARY KEY(COUNTRY_ID),
FOREIGN KEY(REGION_ID) REFERENCES REGIONS(REGION_ID)
);

CREATE TABLE LOCATIONS(
LOCATION_ID INTEGER,
STREET_ADDRESS VARCHAR(25),
POSTAL_CODE VARCHAR(12),
CITY VARCHAR(30),
STATE_PROVINCE VARCHAR(12),
COUNTRY_ID CHAR(2),
PRIMARY KEY(LOCATION_ID),
FOREIGN KEY(COUNTRY_ID) REFERENCES COUNTRIES(COUNTRY_ID)
);

CREATE TABLE DEPARTMENTS(
DEPARTMENT_ID INTEGER,
DEPARTMENT_NAME VARCHAR(30),
MANAGER_ID INTEGER,
LOCATION_ID INTEGER,
PRIMARY KEY(DEPARTMENT_ID),
FOREIGN KEY(LOCATION_ID) REFERENCES LOCATIONS (LOCATION_ID)
);

CREATE TABLE JOB_HISTORY(
EMPLOYEE_ID INTEGER,
START_DATE DATE,
END_DATE DATE,
JOB_ID VARCHAR(10),
DEPARTMENT_ID INTEGER,
PRIMARY KEY(EMPLOYEE_ID, START_DATE),
FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(DEPARTMENT_ID),
FOREIGN KEY(JOB_ID) REFERENCES JOBS (JOB_ID)
);

CREATE TABLE EMPLOYEES(
EMPLOYEE_ID INTEGER,
FIRST_NAME VARCHAR(20),
LAST_NAME VARCHAR(25),
EMAIL VARCHAR(25),
PHONE_NUMBER VARCHAR(20),
HIRE_DATE DATE,
JOB_ID VARCHAR(10),
SALARY INTEGER,
COMMISSION_PCT INTEGER,
MANAGET_ID INTEGER,
DEPARTMENT_ID INTEGER,
FOREIGN KEY(EMPLOYEE_ID) REFERENCES JOB_HISTORY(EMPLOYEE_ID),
FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(DEPARTMENT_ID),
FOREIGN KEY(JOB_ID) REFERENCES JOBS(JOB_ID)
);

CREATE TABLE JOBS(
JOB_ID VARCHAR(10),
JOB_TITLE VARCHAR(35),
MIN_SALARY INTEGER,
MAX_SALARY INTEGER,
PRIMARY KEY (JOB_ID)
);

CREATE TABLE JOB_GRADES(
GRADE_LEVEL VARCHAR(2),
LOWEST_SAL INTEGER,
HIGHEST_SAL INTEGER,
PRIMARY KEY (GRADE_LEVEL)
);

INSERT INTO REGIONS (REGION_ID)
VALUES 
(1),
(2),
(3);

INSERT INTO LOCATIONS(LOCATION_ID, STREET_ADDRESS, POSTAL_CODE, CITY, COUNTRY_ID)
VALUES 
(1000,'1297 VIA COLA DI RIE', 989, 'ROMA', 'IT'),
(1100,'93091 CHALLE DELLA TE', 10934, 'VENICE','IT');

INSERT INTO LOCATIONS VALUES
(1200,'2017 SHINJUKU-KU', 1689,'TOKYO', 'TOKYO', 'JP'),
(1400,'2014 JABBERWOCKY RD', 26192, 'SOUTHLAKE', 'TEXAS', 'US');

INSERT INTO COUNTRIES VALUES
('DE', 'GERMANY',1),
('IT','ITALY', 1),
('JP', 'JAPAN', 3),
('US', 'UNITED STATE', 2);

INSERT INTO DEPARTMENTS VALUES 
(10, 'ADMINISTRATION', 200, 1100),
(20, 'MARKETING', 201, 1200),
(30, 'PURCHASING', 202, 1400);

INSERT INTO JOBS (JOB_ID)
VALUES
('ST_CLERK'),
('MK_REP'),
('IT_PROG')
;

INSERT INTO EMPLOYEES VALUES
(100, 'STEVEN', 'KING', 'SKING', '515-1234567','1987-06-17','ST_CLERK',24000.00, 0.00, 109, 10),
(101,'NEENA', 'KOCHHAR', 'NKOCHHAR', '515-1234568','1987-06-18', 'MK_REP',17000.00, 0.00, 103,20),
(102, 'LEX', 'DE HAAN');
INSERT INTO JOB_HISTORY VALUES
(101, '1989-09-21', '1993-10-27', 'MK_REP', 10),
(101, '1993-10-28', '1997-03-15', 'MK_REP', 30),
(100, '1996-02-17', '1999-12-19', 'ST_CLERK', 30),
(103, '1998-03-24', '1999-12-31', 'MK_REP', 20);


SELECT * FROM JOB_HISTORY;
SELECT * FROM EMPLOYEES;
SELECT * FROM JOBS;
SELECT * FROM REGIONS;
SELECT * FROM LOCATIONS;
SELECT * FROM COUNTRIES;
SELECT * FROM DEPARTMENTS;